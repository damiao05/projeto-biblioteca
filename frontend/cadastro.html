<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Cadastro</title>

<style>

    /* ================= HEADER NOVO ================= */

    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 65px;
      color: #f7f5e9;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 30px;
      z-index: 1000;
    }

    /* BOTÃO VOLTAR MELHORADO */
    #btn-home {
      background: rgba(255, 255, 255, 0.12);
      border: 1.5px solid #f7f5e9;
      padding: 0.45rem 1.2rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      color: #f7f5e9;
      backdrop-filter: blur(4px);
      transition: 0.25s ease;
    }

    #btn-home:hover {
      background: rgba(255, 255, 255, 0.28);
      border-color: #ffffff;
      transform: translateX(-4px);
    }

    h2 {
      font-size: 1.7rem;
      font-weight: 800;
      color: #f7f5e9;
      letter-spacing: 1px;
    }


    /* ================= FUNDO E LAYOUT ================= */

    body {
      font-size:16px;
      font-family: 'Work Sans', sans-serif;
      height: fit-content;
      display: flex;
      justify-content: center;
      align-items: center;

      background: linear-gradient(to right, #b57747, #5e3211);
      padding-top: 90px; /* para não ficar atrás do header */
    }

    .signin-welcome-row {
      margin-bottom: 1rem;
      text-align: center;
    }

    .logo {
      height: 3.5rem;
      margin: 0 auto;
    }

    #form-usuario {
      display: flex;
      flex-direction: column;
      justify-content: start;
      align-items: center;

      gap: 1rem;
      background-color: #f7f5e9;
      width: 100%;
      max-width: 70rem;
      padding: 2.5rem 2rem;
      border-radius: 1rem;
      height: fit-content;
      box-shadow: 8px 8px 100px #13162a;
    }

    .form-button {
      background-color: #986c4a;
      color: #f7f5e9;
      white-space: nowrap;
      border: none;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 0.5rem;
      line-height: 3.125rem;
      outline: none;
      font-size: 1.125rem;
      letter-spacing: .025rem;
      cursor: pointer;
      font-weight: 800;
      min-height: 3.125rem;
      width: 30%;
      border-radius: 0.75rem;
      transition: all .3s ease;
    }

    .form-button:hover {
      background-color: #784b28;
      box-shadow: 2px 2px 30px #b57747;
    }

    .input__wrapper {
      position: relative;
      padding: 0.9375rem 0 0;
      margin-bottom: 1.5rem;
    }

    .input__field {
      font-size: 1.4rem;
      color: #13162a;
      padding: 0.375rem 0;
      padding-right: 2rem;
      padding-bottom: 0.7rem;
      line-height: 2rem;
      height: 2rem;
      outline: 0;
      border: 0;
      width: 100%;
      vertical-align: middle;
      border-bottom: 3px solid #13162a;
      background: transparent;
      transition: border-color 0.2s;
    }

    .inputs {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(15rem, 1fr));
      width: 90%;
      margin-top: 3%;
      margin-bottom: 3%;
      gap: 3rem;
    }

    .input__field::placeholder {
      color: transparent;
    }

    .input__label {
      user-select: none;
    }

    .input__field:placeholder-show~.input__label {
      cursor: text;
      color: #13162a;
      top: 0.8rem;
      font-size: 1.2rem;
    }

    .input__label,
    .input__field:focus~.input__label {
      position: absolute;
      top: -0.8rem;
      display: block;
      font-size: 1.2rem;
      color: #13162a;
      transition: 0.3s;
    }

    .input__field:focus~.input__label {
      color: #986c4a;
    }

    .input__field:focus {
      border-bottom: 3px solid #986c4a;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    *::selection {
      background-color: #986c4a;
      color: #f7f5e9;
    }

</style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <button id="btn-home">← Voltar</button>
    <h2>LitHub</h2>
  </header>


  <!-- FORMULÁRIO DE CADASTRO -->
  <form id="form-usuario" aria-labelled="signin-title">

      <div class="signin-welcome-row">
        <img src="assets/icone_logo_LitHub.png" alt="Logo" class="logo">
        <h1 id="signin-title">Bem-Vindo ao LitHub</h1>
        <p>Por favor, insira suas credenciais!</p>
      </div>

      <div class="inputs">
        <div class="input__wrapper">
          <input type="text" id="nome" class="input__field" placeholder="Nome" required>
          <label for="nome" class="input__label">Nome:</label>
        </div>

        <div class="input__wrapper">
          <input type="text" id="cpf" class="input__field" required>
          <label for="cpf" class="input__label">CPF:</label>
        </div>

        <div class="input__wrapper">
          <input type="date" id="data-nascimento" class="input__field" required>
          <label for="data-nascimento" class="input__label">Data de Nascimento:</label>
        </div>

        <div class="input__wrapper">
          <input type="text" id="telefone" class="input__field">
          <label for="telefone" class="input__label">Telefone:</label>
        </div>

        <div class="input__wrapper">
          <input type="email" id="email" class="input__field" required>
          <label for="email" class="input__label">Email:</label>
        </div>

        <div class="input__wrapper">
          <input type="password" id="senha" class="input__field" required>
          <label for="senha" class="input__label">Senha:</label>
        </div>
      </div>

      <button type="button" id="btn-cadastro" class="form-button">Cadastrar</button>
  </form>

  <!-- SCRIPTS -->
  <script src="./js/jquery.min.js"></script>
  <script src="js/config.js"></script>

  <script>
    const API_CADASTRO = `${API_URL}/usuarios/cadastro`;

    $("#btn-cadastro").on("click", function() {

      const usuario = {
        nome: $("#nome").val(),
        cpf: $("#cpf").val(),
        dataNascimento: $("#data-nascimento").val(),
        telefone: $("#telefone").val(),
        email: $("#email").val(),
        senha: $("#senha").val()
      };

      fetch(API_CADASTRO, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(usuario)
      })
      .then(async response => {
          if (!response.ok) {
              const errorText = await response.text();
              throw new Error(errorText || "Falha no cadastro.");
          }
          return response.json();
      })
      .then(data => {
          alert("Cadastro realizado com sucesso! Por favor, faça o login.");
          window.location.href = 'login.html';
      })
      .catch(error => {
          alert(`Erro no cadastro: ${error.message}`);
      });

    });

    // CORREÇÃO DO VOLTAR
    $("#btn-home").on("click", function() {
      window.location.href = "index.html";
    });

  </script>

</body>
</html>
